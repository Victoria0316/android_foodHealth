package com.cow205.frg;import java.util.ArrayList;import android.graphics.Color;import android.os.Bundle;import android.support.v4.app.Fragment;import android.support.v4.view.ViewPager;import android.support.v4.view.ViewPager.OnPageChangeListener;import android.util.DisplayMetrics;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import com.cow205.adapter.FragmentAdapter;import com.cow205.air_health.*;public class Frag_Context extends Fragment {	private ArrayList<Fragment> fragmentList;	private ViewPager vp_schooltv;	private View view;	TextView Schooltv_ShowOnLine, Schooltv_Dibble, Schooltv_Vip;	private ImageView mTabLineIv;	private int currentIndex, screenWidth;	@Override	public View onCreateView(LayoutInflater inflater, ViewGroup container,			Bundle savedInstanceState) {		view = inflater.inflate(R.layout.fra_home, null);		InitView();		InitFragment();		// SetOnCliclListener();		return view;	}	private void SetOnClickListener() {		vp_schooltv.setOnPageChangeListener(new OnPageChangeListener() {			@Override			public void onPageSelected(int position) {				currentIndex = position;			}			@Override			public void onPageScrolled(int position, float offset, int arg2) {				LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) mTabLineIv						.getLayoutParams();				if (currentIndex == 0 && position == 0) {					lp.leftMargin = (int) (offset * (screenWidth * 1.0 / 3) + currentIndex							* (screenWidth / 3));					Schooltv_ShowOnLine.setBackgroundColor(Color.RED);					Schooltv_Dibble.setBackgroundColor(Color.WHITE);					Schooltv_Vip.setBackgroundColor(Color.WHITE);				} else if (currentIndex == 1 && position == 0) {					lp.leftMargin = (int) (-(1 - offset)							* (screenWidth * 1.0 / 3) + currentIndex							* (screenWidth / 3));					Schooltv_ShowOnLine.setBackgroundColor(Color.RED);					Schooltv_Dibble.setBackgroundColor(Color.WHITE);					Schooltv_Vip.setBackgroundColor(Color.WHITE);				} else if (currentIndex == 1 && position == 1) {					lp.leftMargin = (int) (offset * (screenWidth * 1.0 / 3) + currentIndex							* (screenWidth / 3));					Schooltv_ShowOnLine.setBackgroundColor(Color.WHITE);					Schooltv_Dibble.setBackgroundColor(Color.RED);					Schooltv_Vip.setBackgroundColor(Color.WHITE);				} else if (currentIndex == 2 && position == 1) {					lp.leftMargin = (int) (-(1 - offset)							* (screenWidth * 1.0 / 3) + currentIndex							* (screenWidth / 3));					Schooltv_ShowOnLine.setBackgroundColor(Color.WHITE);					Schooltv_Dibble.setBackgroundColor(Color.WHITE);					Schooltv_Vip.setBackgroundColor(Color.RED);				}				mTabLineIv.setLayoutParams(lp);			}			@Override			public void onPageScrollStateChanged(int arg0) {			}		});		Schooltv_ShowOnLine.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View arg0) {				// TODO Auto-generated method stub				vp_schooltv.setCurrentItem(0);			}		});		Schooltv_Dibble.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View arg0) {				// TODO Auto-generated method stub				vp_schooltv.setCurrentItem(1);			}		});		Schooltv_Vip.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View arg0) {				// TODO Auto-generated method stub				vp_schooltv.setCurrentItem(2);			}		});	}	private void InitFragment() {		fragmentList = new ArrayList<Fragment>();		fragmentList.add(new Frag_Home());		// fragmentList.add(new Frag_Map());		// fragmentList.add(new Frag_Other());		FragmentAdapter adapter = new FragmentAdapter(				getChildFragmentManager(), fragmentList);		vp_schooltv.setAdapter(adapter);	}	private void InitView() {		// Schooltv_ShowOnLine = (TextView) view.findViewById(		// R.id.fra_schooltv_tab).findViewById(R.id.Schooltv_ShowOnLine);		// Schooltv_Dibble = (TextView) view.findViewById(R.id.fra_schooltv_tab)		// .findViewById(R.id.Schooltv_Dibble);		// Schooltv_Vip = (TextView) view.findViewById(R.id.fra_schooltv_tab)		// .findViewById(R.id.School_Vip);		// mTabLineIv = (ImageView) view.findViewById(R.id.fra_schooltv_tab)		// .findViewById(R.id.id_tab_line_iv);		// DisplayMetrics dpMetrics = new DisplayMetrics();		// getActivity().getWindow().getWindowManager().getDefaultDisplay()		// .getMetrics(dpMetrics);		// screenWidth = dpMetrics.widthPixels;		// LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) mTabLineIv		// .getLayoutParams();		// lp.width = screenWidth / 3;		// mTabLineIv.setLayoutParams(lp);		vp_schooltv = (ViewPager) view.findViewById(R.id.vp_schooltv);	}}